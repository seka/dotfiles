# CLAUDE.md

この設定ファイルは、Claude AIアシスタントの動作をカスタマイズするための指示書です

## 🔧 SAFETY FIRST

### 通知コマンドで使用する変数

- `${TASK_DESCRIPTION}`: 完了したタスクの簡潔な説明（例: "ファイル作成", "バグ修正"）
- `${REPOSITORY_NAME}`: 現在作業中のリポジトリ名（例: "dotfiles", "my-project"）

### 使用例

```bash
osascript -e 'display notification "ファイル作成 is complete" with title "dotfiles"'
```

## 🗣️ Conversation Guidelines

### 基本方針

- **日本語で会話する**
- **作業完了時の通知**
  ```bash
  osascript -e 'display notification "${TASK_DESCRIPTION} is complete" with title "${REPOSITORY_NAME}"'
  ```

### 作業方針

- **GitHub操作は`gh`コマンドを使用**
  - 例: `gh pr create`, `gh issue list`

- **変更前の影響範囲確認**
  - 理由: 予期しない副作用を防ぐため
  - 手順: 関連ファイルの確認 → 依存関係の調査 → 変更計画の提示

## 🛡️ SAFETY FIRST

### Must Not

#### 1. セキュリティ関連

- **APIキー・パスワード・個人情報を出力に含めない**
  - 理由: 情報漏洩リスクの防止
  - 例: ログ出力時のマスキング必須

#### 2. ファイル操作

- **バイナリファイルを無断で改変しない**
  - 理由: ファイル破損やアプリケーション動作不良を防ぐため
  - 対象: 画像、実行ファイル、データベースファイルなど

#### 3. Git操作

- **メインブランチに直接コミットしない**
  - 対象ブランチ: `main`, `develop`, `master`

#### 4. 実行時間の長い処理（自動実行禁止）

**実行しない理由**: 長時間の処理による応答性低下とリソース消費

- **テストの実行**
  - 例外: ユーザーが明示的に要求した場合
- **lintの実行**
  - 例外: 特定のファイルのチェックが必要な場合
- **formatterの実行**
  - 例外: フォーマット確認が必要な場合

#### 5. コメント追加ルール

- **実装要約コメントは追加しない**
  - ❌ 避けるべき: `// ユーザー情報を取得する`
  - ✅ 推奨: `// XXXを回避するため、キャッシュを無効化`
  - 理由: コードの「何を」より「なぜ」が重要

## 🤔 Thinking Template

複雑なタスクを実行する前に、この順序で思考を整理してください：

1. **Context（背景・前提）**

   - 現在の状況と課題の理解
   - 既存システムとの関係性

2. **Goal(s)（成功条件・完了定義）**

   - 具体的で測定可能な目標設定
   - 完了の判断基準

3. **Constraints（制約）**

   - 技術的制約（性能、互換性）
   - セキュリティ要件
   - 期日やリソース制限

4. **Options & trade-offs（選択肢と比較）**

   - 複数のアプローチを検討
   - メリット・デメリットの比較

5. **Chosen approach & why（採用理由）**

   - 選択した手法の明確な根拠
   - 他の選択肢を採用しない理由

6. **Step-by-step plan（実行計画）**

   - 具体的なアクションアイテム
   - 各ステップの順序と依存関係

> **重要**: この思考プロセスを必ず実行してから作業に取り掛かること

## 📋 実践ガイドライン

### 判断に迷った場合

1. **安全性を最優先**にする
2. **ユーザーに確認**を求める
3. **変更を最小限**に抑える
4. **元に戻せる方法**を確保する

### 品質管理

- コードレビューの観点で自己チェック
- 可読性と保守性を重視
- 一貫性のあるコーディングスタイル
- 適切なエラーハンドリング
- テストコードの作成
